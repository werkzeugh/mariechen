(function(e){function t(t){for(var n,s,a=t[0],c=t[1],l=t[2],u=0,f=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,a=1;a<i.length;a++){var c=i[a];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},o={app:0},r=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/Mwerkzeug/vue/vbe/dist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"0554":function(e,t,i){var n=i("96a4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("499e").default;o("17611838",n,!0,{sourceMap:!1,shadowMode:!1})},"51a4":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".modal button.delete{height:40px;max-height:40px;max-width:40px;min-height:40px;min-width:40px;width:40px}",""]),e.exports=t},"5c0b":function(e,t,i){"use strict";var n=i("0554"),o=i.n(n);o.a},"7ba4":function(e,t,i){var n=i("51a4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("499e").default;o("6c7c897e",n,!0,{sourceMap:!1,shadowMode:!1})},"96a4":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".vbe{font-size:inherit}",""]),e.exports=t},"9fa1":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".sort-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:4rem;background:#fff;margin:1px}.sort-item:first-child{margin-top:0}.sort-item:last-child{margin-bottom:0}.sort-item .info{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.sort-item .imgholder{-webkit-box-flex:0;-ms-flex:0 0 4rem;flex:0 0 4rem;padding:.9rem}.sort-item .imgholder .imgbox{width:2rem;height:0;padding-bottom:100%;position:relative}.sort-item .imgholder .imgbox>.img{display:block;position:absolute;top:0;left:0;right:0;bottom:0;background-position:50%;background-size:contain;background-repeat:no-repeat}.vbe-imgfolder .sort-list{margin:3rem;max-width:300px;margin-left:auto;margin-right:auto;background:#ccc;overflow-y:auto;max-height:calc(100vh - 200px);border-top:1px solid #ccc;border-bottom:1px solid #ccc}.vbe-imgfolder .sort-buttons{margin-left:auto;margin-right:auto;max-width:360px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.vbe-imgfolder .sort-buttons .sb-label{font-size:1.5em;text-align:right}.vbe-imgfolder .item{width:200px;height:200px;position:relative;border:1px solid #ccc;border-radius:3px;padding:1rem;margin:1rem}.vbe-imgfolder .item .imgholder{padding:.9rem}.vbe-imgfolder .item .imgbox{height:0;padding-bottom:100%;position:relative}.vbe-imgfolder .item .imgbox>.img{display:block;position:absolute;top:0;left:0;right:0;bottom:0;background-position:50%;background-size:contain;background-repeat:no-repeat}.vbe-imgfolder .item.is-hidden .imgbox,.vbe-imgfolder .item.is-hidden .info{opacity:.356}.vbe-imgfolder .item.is-checked{background:#eef}.vbe-imgfolder .item .cb{position:absolute;left:.5em;top:.5em}.vbe-imgfolder .vbe-imglist{margin-top:3rem}.vbe-imgfolder .vbe-imglist .listheader{padding:.6rem;background:#eee;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.vbe-imgfolder .vbe-imglist .item-list{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",""]),e.exports=t},b2df:function(e,t,i){var n=i("9fa1");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("499e").default;o("5ade2a1e",n,!0,{sourceMap:!1,shadowMode:!1})},c979:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".vue-dropzone .fa-cloud-upload{font-size:4em;display:block}.vue-dropzone .dz-preview .dz-error-mark,.vue-dropzone .dz-preview .dz-success-mark{text-align:center}.vue-dropzone .dz-preview .dz-error-mark i.fa{color:#e74c05!important}.vue-dropzone .dz-preview .dz-success-mark i.fa{color:#54af2e!important}.vue-dropzone .dz-fallback{display:none}",""]),e.exports=t},c97e:function(e,t,i){"use strict";var n=i("7ba4"),o=i.n(n);o.a},cd49:function(e,t,i){"use strict";i.r(t),i.d(t,"camelize",(function(){return Ce}));var n={};i.r(n),i.d(n,"extconf",(function(){return K})),i.d(n,"backendBaseUrl",(function(){return Q}));var o={};i.r(o),i.d(o,"mutateCounter",(function(){return Y})),i.d(o,"setCurrentProductId",(function(){return ee})),i.d(o,"setProducts",(function(){return te})),i.d(o,"setCartCount",(function(){return ie}));var r={};i.r(r),i.d(r,"allFiles",(function(){return oe}));var s={};i.r(s),i.d(s,"allFiles",(function(){return ae})),i.d(s,"removeFiles",(function(){return ce})),i.d(s,"saveSort",(function(){return le})),i.d(s,"hideFiles",(function(){return de})),i.d(s,"unhideFiles",(function(){return ue}));var a={};i.r(a),i.d(a,"setAllFiles",(function(){return fe}));i("a630"),i("13d5"),i("b0c0"),i("ac1f"),i("3ca3"),i("5319");var c=i("ade3"),l=i("5530"),d=i("b85c"),u=(i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("a026")),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vbe"},[i("router-view")],1)},p=[],h=u["a"].extend({name:"App",components:{},computed:{},mounted:function(){this.$router.push({name:this.$parent.tagName})},methods:{go:function(e){console.log("#logGO",e),this.$router.push(e)}}}),m=h,b=(i("5c0b"),i("2877")),g=Object(b["a"])(m,f,p,!1,null,null,null),v=g.exports,x=i("8c4f"),k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"vbe-imgfolder"},["sort"==e.mode?i("div",[i("div",[i("slick-list",{staticClass:"sort-list",attrs:{axis:"xy",helperClass:"sort-item"},model:{value:e.sortedfiles,callback:function(t){e.sortedfiles=t},expression:"sortedfiles"}},e._l(e.sortedfiles,(function(t,n){return i("slick-item",{key:n,staticClass:"sort-item",attrs:{index:n}},[i("div",{staticClass:"imgholder"},[i("div",{staticClass:"imgbox"},[i("div",{staticClass:"img",style:{backgroundImage:"url("+t.thumbnail_url+")"}})])]),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[e._v(" "+e._s(t.name)+" ")])])])})),1)],1),i("div",{staticClass:"sort-buttons"},[i("div",{staticClass:"sb-label"},[e._v(" Sortierung ")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.saveSort()}}},[i("i",{staticClass:"fa fa-check"}),e._v(" speichern")]),i("button",{staticClass:"btn ",attrs:{type:"button"},on:{click:function(t){e.mode="list"}}},[i("i",{staticClass:"fa fa-times"}),e._v(" abbrechen")])])]):i("div",[i("Upload",{attrs:{"upload-url":e.upload_url,"mwfile-path":e.path,"button-text":e.buttonText}}),i("div",{staticClass:"vbe-imglist"},[i("div",{staticClass:"listheader"},[i("span",{on:{click:function(t){return e.toggleAll()}}},[i("input",{staticClass:"taggable-toggle",attrs:{type:"checkbox",name:"taggable_toggle"},domProps:{checked:e.isAllSelected}}),e._v(" alle/keine markieren")]),i("button",{staticClass:"btn ",attrs:{type:"button"},on:{click:function(t){e.mode="sort"}}},[i("i",{staticClass:"fa fa-chevron-right"}),e._v(" Bilder sortieren")])]),i("div",{staticClass:"item-list"},e._l(e.files,(function(t,n){return i("div",{key:n,staticClass:"item",class:{"is-hidden":t.hidden,"is-checked":e.isChecked(t.id)},on:{click:function(i){return e.toggle(t.id)}}},[i("input",{staticClass:"cb",attrs:{type:"checkbox",value:"MwFile-$ID"},domProps:{checked:e.isChecked(t.id)}}),i("div",{staticClass:"imgholder"},[i("div",{staticClass:"imgbox"},[i("div",{staticClass:"img",style:{backgroundImage:"url("+t.thumbnail_url+")"}})])]),i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[e._v(" "+e._s(t.name)+" ")])])])})),0),e.isMinimumOneSelected?i("div",[i("button",{staticClass:"btn ",attrs:{type:"button"},on:{click:function(t){return e.removeSelected()}}},[i("i",{staticClass:"fa fa-trash-o"}),e._v(" alle markierten Bilder löschen")]),i("button",{staticClass:"btn ",attrs:{type:"button"},on:{click:function(t){return e.hideSelected()}}},[i("i",{staticClass:"fa fa-trash-o"}),e._v(" alle markierten Bilder sperren")]),i("button",{staticClass:"btn ",attrs:{type:"button"},on:{click:function(t){return e.unhideSelected()}}},[i("i",{staticClass:"fa fa-trash-o"}),e._v(" alle markierten Bilder entsperren")])]):e._e()])],1)])])},w=[],y=(i("caad"),i("d81d"),i("2532"),i("2909")),C=(i("fb6a"),i("d3b7"),i("25f0"),i("1276"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-notification",{attrs:{type:e.data.class,closable:!0},on:{close:function(t){return e.$parent.close()}}},[e._v(" "+e._s(e.data.text)+" ")])}),F=[],_=u["a"].extend({props:{data:{type:Object,required:!0}}}),S=_,z=(i("c97e"),Object(b["a"])(S,C,F,!1,null,null,null)),O=z.exports,j=i("b17e"),M=function(e){var t=[];if((e||{}).data){var i=e.data;(i||{}).errors&&j.map((function(e){"string"===typeof e||e instanceof String?t.push({type:"modal",title:"Error",class:"is-danger",text:e}):t.push({type:"snackbar",class:"is-danger",text:e[0]})}),i.errors),(i||{}).message&&t.push({type:"toast",class:"is-danger",text:e.message})}else t.push({type:"toast",class:"is-warning",text:"error while sending request"});return t.length?t:null},I=function(e,t){null!==t&&t.map((function(t){"toast"==t.type?e.$toast.open({duration:3e3,message:t.text,type:t.class,position:"is-top",queue:!1}):"snackbar"===t.type?e.$snackbar.open({message:t.text,type:t.class,position:"is-top",actionText:"ok",indefinite:!0,queue:!0}):"modal"===t.type&&e.$modal.open({parent:e,component:O,hasModalCard:!0,props:{data:t},canCancel:["outside","escape"]})}))},B=function(e,t){console.log("#handleErrorsFromResponse",t),I(e,M(t))},$=i("11b0"),A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:e.dropzoneOptions}})],1)},P=[],D=i("92c3"),U=i.n(D),T=(i("1e3f"),u["a"].extend({name:"Upload",components:{vueDropzone:U.a},data:function(){var e={dictDefaultMessage:"<span class='btn btn-primary'>".concat(this.buttonText,"</span>"),dictFallbackMessage:"der Foto-Upload funktioniert leider nicht mit deiner Browser-Version, Bitte verwende einen aktuelleren Browser.",dictFallbackText:"",dictFileTooBig:"Die Datei ist zu groß ({{filesize}}MiB). Maximale Dateigröße: {{maxFilesize}}MiB.",dictInvalidFileType:"Du kannst leider nur Bilder im JPG Format hochladen",dictResponseError:"Server reagiert mit {{statusCode}} code.",dictCancelUpload:"Upload abbrechen",dictCancelUploadConfirmation:"Bist Du sicher, dass Du diesen Upload abbrechen möchtest?",dictRemoveFile:"Bild löschen",dictMaxFilesExceeded:"Du kannst nur insgesamt 100 Bilder hochladen"};return{dropZoneIsActive:!0,dropzoneOptions:Object(l["a"])({url:this.uploadUrl,thumbnailWidth:160,maxFilesize:10,headers:{"mwfile-path":this.mwfilePath}},e)}},props:{uploadUrl:{type:String,required:!0},mwfilePath:{type:String,required:!0},buttonText:{type:String,required:!0}},computed:{},methods:{onSuccess:function(e){var t=JSON.parse(e.xhr.responseText);e.localFilename=t.file,this.$store.commit("addFoto",t)},onRemovedFile:function(e){this.dropZoneIsActive&&(console.log("remove file",e),this.$store.commit("removeFoto",e.localFilename))}},created:function(){this.dropZoneIsActive=!0},beforeDestroy:function(){this.dropZoneIsActive=!1,console.log("before Destroy",null)}})),q=T,E=(i("f463"),Object(b["a"])(q,A,P,!1,null,null,null)),G=E.exports,N=i("b17e"),J=u["a"].extend({name:"ImgFolder",data:function(){return{waiting:0,mode:"sort",checkedFileIds:[],sortedfiles:[]}},props:{path:{type:String,required:!0},buttonText:{type:String,required:!1,default:"Upload Files..."}},components:{Upload:G,"slick-item":$["SlickItem"],"slick-list":$["SlickList"]},methods:{saveSort:function(){var e=this,t=N.map((function(e){return e.id}),this.sortedfiles);this.waiting++,this.$store.dispatch("imgfolder/saveSort",{sorted_ids:t,path:this.path}).then((function(t){e.waiting--,e.mode="list",e.fetchData()})).catch((function(t){console.error(t),B(e,t),e.waiting--}))},isChecked:function(e){return N.includes(e,this.checkedFileIds)},toggle:function(e){this.isChecked(e)?this.checkedFileIds=N.without([e],this.checkedFileIds):this.checkedFileIds.push(e)},toggleAll:function(e){this.checkedFileIds.length>0?this.checkedFileIds=[]:this.checkedFileIds=N.map((function(e){return e.id}),this.files)},fetchData:function(){var e=this;this.waiting++,this.$store.dispatch("imgfolder/allFiles",{path:this.path}).then((function(t){e.waiting--,e.sortedfiles=Object(y["a"])(e.files)})).catch((function(t){console.error(t),B(e,t),e.waiting--}))},removeSelected:function(){var e=this;confirm("Sind sie sicher ?")&&(this.waiting++,this.$store.dispatch("imgfolder/removeFiles",{path:this.path,file_ids:this.checkedFileIds}).then((function(t){e.waiting--,e.fetchData()})).catch((function(t){console.error(t),B(e,t),e.waiting--})))},hideSelected:function(){var e=this;this.waiting++,this.$store.dispatch("imgfolder/hideFiles",{path:this.path,file_ids:this.checkedFileIds}).then((function(t){e.waiting--,e.fetchData()})).catch((function(t){console.error(t),B(e,t),e.waiting--}))},unhideSelected:function(){var e=this;this.waiting++,this.$store.dispatch("imgfolder/unhideFiles",{path:this.path,file_ids:this.checkedFileIds}).then((function(t){e.waiting--,e.fetchData()})).catch((function(t){console.error(t),B(e,t),e.waiting--}))}},computed:{isAllSelected:function(){return this.checkedFileIds.length==this.files.length},isMinimumOneSelected:function(){return this.checkedFileIds.length>0},files:function(){return this.$store.getters["imgfolder/allFiles"]},upload_url:function(){return this.$store.getters.backendBaseUrl+"/MwFile/receiveDropzoneFile"}},mounted:function(){this.fetchData()}}),R=J,Z=(i("f9df"),Object(b["a"])(R,k,w,!1,null,null,null)),L=Z.exports,V=function(e){return new x["a"]({linkActiveClass:"is-active",mode:"abstract",routes:[{path:"/imgfolder",component:L,name:"vbe-imgfolder",props:e}]})},W=V,H=i("2f62"),K=function(e){return e.extconf},Q=function(e){return e.extconf.backendBaseUrl},X=i("fc60"),Y=function(e,t){e.counter=e.counter+t},ee=function(e,t){e.currentProductId=t},te=function(e,t){e.products=t},ie=function(e,t){e.cartCount=t},ne=i("9fdd"),oe=function(e){return e.allFiles},re=i("bc3a"),se=i.n(re),ae=function(e){var t=e.commit,i=e.rootGetters,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t("setAllFiles",[]),new Promise((function(e,o){se.a.get(i["backendBaseUrl"]+"/MwFile_Api/get_files",{params:n}).then((function(i){t("setAllFiles",i.data.payload),e(i)})).catch((function(e){console.error(e),o(e.response)}))}))},ce=function(e,t){e.commit;var i=e.rootGetters;return new Promise((function(e,n){se.a.post(i["backendBaseUrl"]+"/MwFile_Api/remove_files",t).then((function(t){e(t)})).catch((function(e){console.error(e),n(e.response)}))}))},le=function(e,t){e.commit;var i=e.rootGetters;return new Promise((function(e,n){se.a.post(i["backendBaseUrl"]+"/MwFile_Api/sort_files",t).then((function(t){e(t)})).catch((function(e){console.error(e),n(e.response)}))}))},de=function(e,t){e.commit;var i=e.rootGetters;return new Promise((function(e,n){se.a.post(i["backendBaseUrl"]+"/MwFile_Api/hide_files",t).then((function(t){e(t)})).catch((function(e){console.error(e),n(e.response)}))}))},ue=function(e,t){e.commit;var i=e.rootGetters;return new Promise((function(e,n){se.a.post(i["backendBaseUrl"]+"/MwFile_Api/unhide_files",t).then((function(t){e(t)})).catch((function(e){console.error(e),n(e.response)}))}))},fe=function(e,t){e.allFiles=t},pe={allFiles:[]},he={namespaced:!0,state:function(){return ne["a"](pe)},getters:r,actions:s,mutations:a},me={debug:!0,counter:0,currentProductId:0,activeImageIndex:0,images:[],products:[],extconf:window.vbeAppConf,cartCount:null};u["a"].use(H["a"]);var be=new H["a"].Store({state:ne["a"](me),getters:n,actions:X,mutations:o,modules:{imgfolder:he},strict:!0}),ge=be,ve=i("b17e");u["a"].config.productionTip=!1,u["a"].use(x["a"]);var xe=".vueapp-vbe",ke=Array.from(document.querySelectorAll(xe)),we=[],ye=/-(\w)/g,Ce=function(e){return e.replace(ye,(function(e,t){return t?t.toUpperCase():""}))};if(ke.length>0){var Fe,_e=Object(d["a"])(ke);try{for(_e.s();!(Fe=_e.n()).done;){var Se,ze=Fe.value,Oe=ve.reduce((function(e,t){return Object(l["a"])(Object(l["a"])({},e),{},Object(c["a"])({},Ce(t.name),t.value))}),{})(ze.attributes),je=[],Me=Object(d["a"])(ze.children);try{for(Me.s();!(Se=Me.n()).done;){var Ie=Se.value;je.push(ve.reduce((function(e,t){return Object(l["a"])(Object(l["a"])({},e),{},Object(c["a"])({},t.name,t.value))}),{})(Ie.attributes))}}catch($e){Me.e($e)}finally{Me.f()}Oe.childNodes=je;var Be=new u["a"]({render:function(e){return e(v)},el:ze,data:{tagName:null,attributes:{}},beforeMount:function(){this.tagName=this.$el.tagName.toLowerCase()},router:W(Oe),store:ge});we.push(Be)}}catch($e){_e.e($e)}finally{_e.f()}}},d530:function(e,t,i){var n=i("c979");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("499e").default;o("73e809ea",n,!0,{sourceMap:!1,shadowMode:!1})},f463:function(e,t,i){"use strict";var n=i("d530"),o=i.n(n);o.a},f9df:function(e,t,i){"use strict";var n=i("b2df"),o=i.n(n);o.a},fc60:function(e,t){}});
//# sourceMappingURL=app.336fd262.js.map